execute as @s[tag=!wr.placed] run function wr:transmitter/placed

execute unless block ~ ~ ~ redstone_wire[power=0] if block ~ ~ ~ redstone_wire as @e[type=armor_stand,tag=wr.tune] if score @s wr.block_id = @e[type=item_frame,limit=1,sort=nearest] wr.block_id at @s as @e[type=armor_stand,tag=wr.tune,tag=wr.class.redstone_receiver] if score @s wr.tune = @e[type=armor_stand,limit=1,sort=nearest] wr.tune at @s positioned ~ ~1.5 ~ as @e[type=glow_item_frame,distance=..1] run setblock ~ ~ ~ air
execute unless block ~ ~ ~ redstone_wire[power=0] if block ~ ~ ~ redstone_wire as @e[type=armor_stand,tag=wr.tune] if score @s wr.block_id = @e[type=item_frame,limit=1,sort=nearest] wr.block_id at @s as @e[type=armor_stand,tag=wr.tune,tag=wr.class.redstone_receiver] if score @s wr.tune = @e[type=armor_stand,limit=1,sort=nearest] wr.tune at @s positioned ~ ~1.5 ~ as @e[type=glow_item_frame,distance=..1] run setblock ~ ~ ~ minecraft:acacia_button[powered=true,face=floor]
execute if block ~ ~ ~ redstone_wire[power=0] as @e[type=armor_stand,tag=wr.tune] if score @s wr.block_id = @e[type=item_frame,limit=1,sort=nearest] wr.block_id at @s as @e[type=armor_stand,tag=wr.tune,tag=wr.class.redstone_receiver] if score @s wr.tune = @e[type=armor_stand,limit=1,sort=nearest] wr.tune at @s positioned ~ ~1.5 ~ as @e[type=glow_item_frame,distance=..1] run setblock ~ ~ ~ air
execute if block ~ ~ ~ redstone_wire[power=0] as @e[type=armor_stand,tag=wr.tune] if score @s wr.block_id = @e[type=item_frame,limit=1,sort=nearest] wr.block_id at @s as @e[type=armor_stand,tag=wr.tune,tag=wr.class.redstone_receiver] if score @s wr.tune = @e[type=armor_stand,limit=1,sort=nearest] wr.tune at @s positioned ~ ~1.5 ~ as @e[type=glow_item_frame,distance=..1] run setblock ~ ~ ~ minecraft:acacia_button[powered=false,face=floor]
